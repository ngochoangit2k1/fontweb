import Head from 'next/head'
import Image from 'next/image'
import React from 'react'
import Link from 'next/link'
import { BsSearch } from 'react-icons/bs'
import { useState } from 'react'
import MenuFont from '@/components/MenuFonts/MenuFont'
import ProductHome from '@/components/ProductHome'

function Home({ Data }) {
	const [HomeData, setHomeData] = useState(Data)
	const funcFilter = nameFont => {
		const nameFonts = Data.filter(item => item.nameFont === nameFont)
		setHomeData(nameFonts)
	}

	const [seeMore, setSeeMore] = useState(8)

	const showMore = HomeData.slice(0, seeMore)

	const loadMore = () => {
		setSeeMore(prevValue => prevValue + 4)
	}

	return (
		<>
			<Head>
				<title>sanFont</title>
				<meta name='description' content='Generated by create next app' />
				<meta name='viewport' content='width=device-width, initial-scale=1' />

				<link rel='icon' href='/favicon.ico' />
			</Head>
			{/* search */}
			<div className=' w-full mt-12'>
				<div className='relative mx-auto w-[70%] max-lg:w-[80%]'>
					<input
						type='text'
						id='small-input'
						placeholder='Tìm font tại đây'
						className='pl-4 font-normal w-full py-3 border border-white hover:border-oranges rounded-[30px] focus:outline-none focus:border-oranges text-base '
					/>

					<div className='absolute top-3 right-6'>
						<BsSearch className='w-7 h-6 text-[#9ca3af]' />
					</div>
				</div>
			</div>

			{/* Menu font */}
			<MenuFont Data={Data} setHomeData={setHomeData} />

			{/* products */}

			<div className='flex gap-3'>
				<h2 className='font-medium text-3xl ml-[7%] mt-16'>
					{HomeData.length} font
				</h2>
			</div>

			<div className='w-[85%]	 mx-auto mt-6 grid grid-cols-4 gap-6 max-xl:w-[90%] max-lg:grid-cols-2 max-xl:grid-cols-3 max-sm:grid-cols-1'>
				<ProductHome showMore={showMore} />
			</div>

			{/* Xem thêm */}
			<div className='w-full text-center mt-6'>
				<button
					onClick={loadMore}
					className='bg-oranges  hover:bg-[#ff0000] py-2 px-6 font-normal text-base text-white rounded-[8px]'
				>
					Xem thêm
				</button>
			</div>

			<div className='w-[85%] h-96 bg-white mx-auto mt-12'></div>
		</>
	)
}

export default Home

export async function getStaticProps() {
	const response = await fetch('http://localhost:4000/HomeData')
	const data = await response.json()

	return {
		props: {
			Data: data,
		},
	}
}
